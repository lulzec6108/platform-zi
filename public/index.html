<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Si Paling ZI - BPS</title>
    
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css?v=1.0.0">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Google Fonts - Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="style.css?v=1.2">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://i.imgur.com/ivaX19X.png">

    <!-- CSS Kustom untuk Kartu Tugas (Workaround) -->
    <style>
      /* Memberi warna latar pada area bawah kartu */
      .task-card .card-action {
        background-color: #f8f9fa; /* Warna abu-abu yang sangat lembut */
        border-top: 1px solid #e9ecef; /* Garis pemisah halus */
        padding: 16px 24px;
        text-align: center; /* Pusatkan tombol */
      }

      /* Mengubah tombol "Detail & Upload" */
      .task-card .card-action .btn-detail {
        color: #1565C0 !important; /* Warna biru sesuai tema dashboard */
        font-weight: 600; /* Teks lebih tebal */
        text-transform: none; /* Agar tidak kapital semua */
        display: inline-flex;
        align-items: center;
        padding: 0;
      }

      /* Mengubah ikon di dalam tombol */
      .task-card .card-action .btn-detail i {
        color: #1565C0 !important; /* Pastikan ikon juga berwarna biru */
        margin-right: 8px; /* Jarak antara ikon dan teks */
      }

      /* Menghilangkan efek latar saat hover agar lebih bersih */
      .task-card .card-action .btn-detail:hover {
        background-color: transparent !important;
      }

      .status-badge.belum-dikerjakan {
        background-color: #f44336; /* Merah */
        color: #fff;
      }
      .status-badge.sedang-dikerjakan {
        background-color: #fb8c00; /* Oranye */
        color: #fff;
      }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading" class="loading-overlay" style="display: none;">
        <div class="preloader-wrapper big active">
            <div class="spinner-layer spinner-blue-only">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div><div class="gap-patch">
                    <div class="circle"></div>
                </div><div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page">
        <div class="login-container">
            <!-- Kolom untuk Ilustrasi/Branding (Desktop) -->
            <div class="login-art-side hide-on-med-and-down">
                <div class="art-content">
                    <h2>Si Paling ZI</h2>
                    <p><em>Integritas Itu Sikap, Bukan Spanduk.</em></p>
                    <div class="art-illustration">
                        <!-- Ilustrasi akan tetap dari CSS -->
                    </div>
                </div>
            </div>

            <!-- Kolom untuk Form Login -->
            <div class="login-form-side">
                <div class="card-panel login-panel">
                    <div class="login-header center-align">
                        <img src="https://i.imgur.com/ivaX19X.png" alt="Logo BPS" class="login-logo">
                        <h4 class="login-title-mobile">Si Paling ZI</h4>
                        <p>Silakan login untuk melanjutkan</p>
                    </div>

                    <form id="login-form">
                        <div class="input-field">
                            <i class="material-icons prefix">person</i>
                            <input id="username" type="text" class="validate" required>
                            <label for="username">Username</label>
                        </div>
                        <div class="input-field">
                            <i class="material-icons prefix">lock</i>
                            <input id="password" type="password" class="validate" required>
                            <label for="password">Password</label>
                        </div>
                        <div id="error-message" class="red-text center-align" style="margin-bottom: 15px;"></div>
                        
                        <div class="center-align">
                            <button type="submit" class="btn">Login</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content (Dashboard) -->
    <div id="main-content" style="display: none;">
        <header>
            <!-- Top navigation -->
            <div class="navbar-fixed">
                <nav class="main-navbar">
                    <div class="nav-wrapper">
                        <a href="#!" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                        <a href="#" class="brand-logo">
                            <!-- Logo BPS dihapus dari sini -->
                            <div>
                                <span class="logo-main-text">Si Paling ZI</span>
                                <span class="logo-tagline">Integritas Itu Sikap, Bukan Spanduk.</span>
                            </div>
                        </a>
                        <ul class="right hide-on-med-and-down">
                            <!-- Menu desktop sengaja dikosongkan, navigasi utama ada di sidenav-fixed -->
                        </ul>
                    </div>
                </nav>
            </div>
            <!-- Sidenav -->
            <ul id="slide-out" class="sidenav sidenav-fixed">
                <li>
                    <div class="user-view">
                        <div class="background" style="background-color: var(--primary-color);"></div>
                        <a href="#user">
                            <img id="user-avatar-img" class="circle user-avatar" src="" alt="User Avatar">
                        </a>
                        <a href="#name"><span class="white-text name" id="sidenav-user-name">Nama Pengguna</span></a>
                        <a href="#email"><span class="white-text email" id="sidenav-user-role">Role</span></a>
                    </div>
                </li>
                <li class="active"><a href="#!" data-view="dashboard-view"><i class="material-icons">dashboard</i>Dashboard</a></li>
                <li><a href="#!" data-view="kinerja-tim-view"><i class="material-icons">groups</i>Kinerja Tim</a></li>
                <li><a href="#!" data-view="tugas-saya-view"><i class="material-icons">assignment</i>Tugas Saya</a></li>
                <li><a href="#!" data-view="link-pendukung-view"><i class="material-icons">link</i>Link Pendukung</a></li>
                <li><div class="divider"></div></li>
                <li><a id="logout-button"><i class="material-icons">logout</i>Logout</a></li>

                <!-- Copyright Info -->
                <li class="copyright-info">
                    <p>&copy; 2025 BPS Kabupaten Kapuas Hulu</p>
                </li>
            </ul>
        </header>

        <!-- Page Content -->
        <main>
            <div class="container">
                <div id="dashboard-view" class="view">
                    <h4 class="page-title">Dashboard</h4>
                    <div class="divider"></div>
                    <!-- Konten Dashboard akan dimuat di sini -->
                </div>

                <div id="kinerja-tim-view" class="view" style="display: none;">
                    <h4 class="page-title">Kinerja Tim</h4>
                    <div class="divider"></div>
                    <!-- Konten untuk Kinerja Tim akan ditambahkan di sini -->
                </div>

                <div id="tugas-saya-view" class="view" style="display: none;">
                    <h4 class="page-title">Tugas Saya</h4>
                    <div class="divider"></div>
                    <!-- Wadah untuk daftar tugas dalam bentuk kartu -->
                    <div id="tugas-saya-container" class="row">
                        <!-- Konten kartu tugas akan dimuat di sini oleh JavaScript -->
                    </div>
                </div>

                <div id="link-pendukung-view" class="view" style="display: none;">
                    <h4 class="page-title">Link Pendukung</h4>
                    <div class="divider"></div>
                    <!-- Kontainer untuk kartu link, yang dicari oleh JS -->
                    <div id="link-pendukung-container" class="row"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Structure: Detail Tugas (Versi Final) -->
    <div id="detailModal" class="modal modal-fixed-footer">
        <div class="modal-header">
            <h5>Detail Tugas</h5>
            <a href="#!" class="modal-close waves-effect waves-circle btn-flat"><i class="material-icons">close</i></a>
        </div>
        <div class="modal-content">
            <!-- Bagian Hirarki Tugas -->
            <div id="modal-hierarchy-box" class="hierarchy-box"></div>

            <!-- Info Tambahan -->
            <div class="info-section">
                <p class="info-label">Aspek yang dinilai:</p>
                <p id="modal-detail-hirarki" class="info-value"></p>

                <p class="info-label">Panduan Pemberian Nilai:</p>
                <p id="modal-opsi-jawaban" class="info-value preserve-whitespace"></p>

                <p class="info-label">Referensi Bukti Dukung ZI:</p>
                <div id="modal-referensi-link" class="info-value"></div>

                <p class="info-label">Status:</p>
                <p id="modal-status" class="info-value"></p>
            </div>

            <!-- Garis Pemisah -->
            <div class="divider"></div>

            <!-- Form Penilaian dalam Card -->
            <div class="form-section card-panel">
                <h6 class="form-title center-align">Form Penilaian Mandiri</h6>
                <div class="input-field">
                    <select id="nilai-select">
                        <option value="" disabled selected>Pilih Nilai</option>
                    </select>
                    <label>Pilih Nilai</label>
                </div>
                <div id="rincian-fields-container"></div>
                <button id="add-rincian-btn" class="btn-small waves-effect waves-light"><i class="material-icons left">add</i>Tambah Rincian</button>
            </div>
        </div>
        <div class="modal-footer">
            <a id="btn-upload-folder" href="#!" target="_blank" class="btn-flat waves-effect waves-green">Buka Gdrive ZI 6108</a>
            <a id="btn-simpan-penilaian" href="#!" class="btn waves-effect waves-light">Simpan</a>
        </div>
    </div>

    <!-- FAB (Floating Action Button) -->
    <div class="fixed-action-btn">
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Tambahkan ?v=... untuk cache busting. Ganti angkanya setiap ada perubahan besar. -->
    <script src="script.js?v=5"></script>
</body>
</html>
